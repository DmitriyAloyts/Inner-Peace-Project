(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(50)},45:function(e,t,a){},46:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=a(53),s=a(54),u=a(55);function m(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)}function i(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)}function d(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map(function(e){return"col-"+e}).join(" ")},a)}var E=a(2),f=a(21),p=a(8),v=a(5),b="UPDATE_POSTS",h="REMOVE_POST",g="ADD_POST",O="LOADING",_=Object(n.createContext)(),j=_.Provider,P=function(e,t){switch(console.log({action:t,state:e}),t.type){case"SET_CURRENT_POST":return Object(v.a)({},e,{currentPost:t.post,loading:!1});case b:return Object(v.a)({},e,{posts:Object(p.a)(t.posts),loading:!1});case g:return Object(v.a)({},e,{posts:[t.post].concat(Object(p.a)(e.posts)),loading:!1});case"ADD_COMMENT":var a=e.posts.map(function(e){if(e._id==t.post_id){var a=e;return a.comments.push(t.comment),a}return e}),n=e.currentPost;return n.comments.push(t.comment),Object(v.a)({},e,{posts:a,currentPost:n,loading:!1});case h:return Object(v.a)({},e,{posts:e.posts.filter(function(e){return e._id!==t._id})});case"ADD_FAVORITE":return Object(v.a)({},e,{favorites:[t.post].concat(Object(p.a)(e.favorites)),loading:!1});case"UPDATE_FAVORITES":return Object(v.a)({},e,{favorites:Object(p.a)(e.favorites),loading:!1});case"REMOVE_FAVORITE":return Object(v.a)({},e,{favorites:e.favorites.filter(function(e){return e._id!==t._id})});case O:return Object(v.a)({},e,{loading:!0});default:return e}},y=function(e){e.value;var t=Object(f.a)(e,["value"]),a=Object(n.useReducer)(P,{posts:[],currentPost:{_id:0,title:"",body:"",author:"",comments:[]},favorites:[],loading:!1}),c=Object(E.a)(a,2),l=c[0],o=c[1];return r.a.createElement(j,Object.assign({value:[l,o]},t))},N=function(){return Object(n.useContext)(_)},T=a(7),R=a.n(T),A={getPosts:function(){return R.a.get("http://localhost:3001/api/posts")},getPost:function(e){return R.a.get("http://localhost:3001/api/posts/"+e)},deletePost:function(e){return R.a.delete("http://localhost:3001/api/posts/"+e)},savePost:function(e){return R.a.post("http://localhost:3001/api/posts",e)},saveComment:function(e){return R.a.post("http://localhost:3001/api/comments",e)}};var C=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=N(),l=Object(E.a)(c,2),o=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("img",{className:"img-fluid img-thumbnail",src:"http://thejourneymethod.com/wp-content/uploads/2016/06/iStock_000017239899Small.jpg"})),r.a.createElement("h4",null,"Create a blog post"),r.a.createElement("form",{className:"form-group mt-5 mb-5",onSubmit:function(n){n.preventDefault(),s({type:O}),A.savePost({title:e.current.value,body:t.current.value,author:a.current.value}).then(function(e){s({type:g,post:e.data})}).catch(function(e){return console.log(e)}),e.current.value="",t.current.value=""}},r.a.createElement("input",{className:"form-control mb-5",required:!0,ref:e,placeholder:"Title"}),r.a.createElement("textarea",{className:"form-control mb-5",required:!0,ref:t,placeholder:"Body"}),r.a.createElement("input",{className:"form-control mb-5",ref:a,placeholder:"Screen name"}),r.a.createElement("button",{className:"btn btn-success mt-3 mb-5",disabled:o.loading,type:"submit"},"Save Post")))};a(45);function D(e){var t=e.children;return r.a.createElement("div",{className:"list-overflow-container"},r.a.createElement("ul",{className:"list-group"},t))}function S(e){var t=e.children;return r.a.createElement("li",{className:"list-group-item"},t)}a(46);var F=function(e){return r.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")},k=a(52);var x=function(){var e=N(),t=Object(E.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){c({type:O}),A.getPosts().then(function(e){c({type:b,posts:e.data})}).catch(function(e){return console.log(e)})},[]),r.a.createElement("div",null,r.a.createElement("h4",null,"All Blog Posts"),a.posts.length?r.a.createElement(D,null,a.posts.map(function(e){return r.a.createElement(S,{key:e._id},r.a.createElement(k.a,{to:"/posts/"+e._id},r.a.createElement("strong",null,e.title," by ",e.author)),r.a.createElement(F,{onClick:function(){return t=e._id,void A.deletePost(t).then(function(){c({type:h,_id:t})}).catch(function(e){return console.log(e)});var t}}))})):r.a.createElement("h3",null,"You haven't added any posts yet!"),r.a.createElement("div",{className:"mt-5"},r.a.createElement(k.a,{to:"favorites"},"View favorites")))},w=function(){return r.a.createElement(m,{fluid:!0},r.a.createElement(i,null,r.a.createElement(d,{size:"md-6"},r.a.createElement(C,null)),r.a.createElement(d,{size:"md-6 sm-12"},r.a.createElement(x,null))))};var V=function(e){var t=e.children;return r.a.createElement("div",{style:{height:260,clear:"both",paddingTop:60,textAlign:"center"},className:"jumbotron border border-success"},t)},I=function(e){var t=N(),a=Object(E.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)(function(){console.log(c)},[c]),Object(n.useEffect)(function(){console.log(s.current.value),console.log(e.match.params),A.getPost(e.match.params.id).then(function(e){return l({type:"SET_CURRENT_POST",post:e.data})}).catch(function(e){return console.log(e)})},[]);var o=c.favorites.map(function(e){return e._id});console.log(c.currentPost);var s=Object(n.useRef)(),u=N(),f=Object(E.a)(u,2);f[0],f[1];return r.a.createElement(r.a.Fragment,null,c.currentPost?r.a.createElement(m,{fluid:!0},r.a.createElement(i,null,r.a.createElement(d,{size:"md-12"},r.a.createElement(V,null,r.a.createElement("h3",null,c.currentPost.title," by ",c.currentPost.author)))),r.a.createElement(i,null,r.a.createElement(d,{size:"md-10 md-offset-1"},r.a.createElement("article",null,r.a.createElement("h3",null,"Content:"),r.a.createElement("p",null,c.currentPost.body))),-1!==o.indexOf(c.currentPost._id)?r.a.createElement("button",{className:"btn btn-danger",onClick:function(){l({type:"REMOVE_FAVORITE",_id:c.currentPost._id})}},"Remove from Favorites!"):r.a.createElement("button",{className:"btn",onClick:function(){l({type:"ADD_FAVORITE",post:c.currentPost})}},"\u2764\ufe0f Add to Favorites")),r.a.createElement(i,null,r.a.createElement("input",{className:"form-control mb-5",ref:s,placeholder:"comments"}),r.a.createElement("button",{className:"btn btn-success mt-3 mb-5",disabled:c.loading,type:"submit",onClick:function(e){e.preventDefault(),console.log(s.current.value),l({type:O}),A.saveComment({comment:s.current.value,post_id:c.currentPost._id}).then(function(e){console.log(e),l({type:"ADD_COMMENT",comment:{_id:e.data.comments[e.data.comments.length-1],comment:s.current.value},post_id:c.currentPost._id}),s.current.value=""}).catch(function(e){return console.log(e)})}},"Submit"),r.a.createElement(d,{size:"md-2"},r.a.createElement("ul",null,c.currentPost.comments.map(function(e){return r.a.createElement("li",null,e.comment)})))),r.a.createElement(i,null,r.a.createElement(d,{size:"md-2"},r.a.createElement(k.a,{to:"/"},"\u2190 Back to Posts")))):r.a.createElement("div",null,"loading..."))},z=function(){return r.a.createElement(m,{fluid:!0},r.a.createElement(i,null,r.a.createElement(d,{size:"md-12"},r.a.createElement(V,null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("h1",null,r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))};var M=function(){var e=N(),t=Object(E.a)(e,1)[0];return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"Inner Peace Blog"),t.loading?r.a.createElement("a",{className:"navbar-brand ml-auto"},"Loading..."):r.a.createElement(r.a.Fragment,null))},B=function(){var e=N(),t=Object(E.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){c({type:O}),c({type:"UPDATE_FAVORITES"})},[]),r.a.createElement("div",{className:"container mb-5 mt-5"},r.a.createElement("h1",{className:"text-center"},"Here's All of Your Favorite Posts"),a.favorites.length?r.a.createElement(D,null,r.a.createElement("h3",{className:"mb-5 mt-5"},"Click on a post to view in detail"),a.favorites.map(function(e){return r.a.createElement(S,{key:e._id},r.a.createElement(k.a,{to:"/posts/"+e._id},r.a.createElement("strong",null,e.title," by ",e.author)),r.a.createElement(F,{onClick:function(){return t=e._id,void c({type:"REMOVE_FAVORITE",_id:t});var t}}))})):r.a.createElement("h3",null,"You haven't added any favorites yet!"),r.a.createElement("div",{className:"mt-5"},r.a.createElement(k.a,{to:"home"},"Back to home")))};var U=function(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(y,null,r.a.createElement(M,null),r.a.createElement(s.a,null,r.a.createElement(u.a,{exact:!0,path:"/",component:w}),r.a.createElement(u.a,{exact:!0,path:"/home",component:w}),r.a.createElement(u.a,{exact:!0,path:"/favorites",component:B}),r.a.createElement(u.a,{exact:!0,path:"/posts/:id",component:I}),r.a.createElement(u.a,{component:z})))))};l.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.bc095368.chunk.js.map